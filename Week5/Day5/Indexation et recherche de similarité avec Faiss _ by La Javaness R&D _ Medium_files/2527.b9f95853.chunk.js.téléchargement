/*! For license information please see 2527.b9f95853.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[2527],{47731:(e,t,n)=>{n.d(t,{A:()=>a});var r,o=n(96540);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(null,arguments)}const a=function(e){return o.createElement("svg",i({width:19,height:19,className:"svgIcon-use",viewBox:"0 0 19 19"},e),r||(r=o.createElement("path",{fillRule:"evenodd",d:"M7.6 5.138 12.03 9.5 7.6 13.862l-.554-.554L10.854 9.5 7.046 5.692"})))}},52752:(e,t,n)=>{n.d(t,{A:()=>a});var r,o=n(96540);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(null,arguments)}const a=function(e){return o.createElement("svg",i({width:25,height:25,className:"svgIcon-use"},e),r||(r=o.createElement("path",{fillRule:"evenodd",d:"M5 12.5q0 .828.586 1.414.585.585 1.414.586.828 0 1.414-.586.585-.586.586-1.414 0-.828-.586-1.414A1.93 1.93 0 0 0 7 10.5q-.828 0-1.414.586-.585.586-.586 1.414m5.617 0q0 .828.586 1.414.587.585 1.414.586.828 0 1.414-.586t.586-1.414-.586-1.414a1.93 1.93 0 0 0-1.414-.586q-.827 0-1.414.586-.586.586-.586 1.414m5.6 0q0 .828.586 1.414.585.585 1.432.586.827 0 1.413-.586t.587-1.414q0-.828-.587-1.414a1.93 1.93 0 0 0-1.413-.586q-.847 0-1.432.586t-.587 1.414z"})))}},17180:(e,t,n)=>{n.d(t,{El:()=>i,Ox:()=>r,_5:()=>o});var r=function(e){if(!e)return!1;var t=e.graphQLErrors;return!!t&&!!t.find((function(e){var t;return"RESPONSE_LOCKED"===(null===(t=e.extensions)||void 0===t?void 0:t.code)}))},o=function(e){return!(!e||0===e.length||!e.find((function(e){var t;return"TOO_MANY_REQUESTS"===(null===(t=e.extensions)||void 0===t?void 0:t.code)})))},i=function(e){return!(!e||0===e.length||!e.find((function(e){var t;return"NOT_FOUND"===(null===(t=e.extensions)||void 0===t?void 0:t.code)})))}},8389:(e,t,n)=>{var r;n.d(t,{J:()=>r}),function(e){e.FULL="web-full",e.INLINE_HOMEPAGE_TOP="web-inline-homepage-top",e.INLINE_POST_RESPONSE="web-inline-post-response",e.INLINE_NEWSLETTER="web-inline-newsletter",e.INLINE_QUOTE_RESPONSES="web-inline-quote-responses"}(r||(r={}))},52798:(e,t,n)=>{n.d(t,{I:()=>c});var r,o=n(96540),i=n(86527),a=n(5600),l=n(44402);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}const u=function(e){return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",width:25,height:25,viewBox:"0 0 25 25"},e),r||(r=o.createElement("path",{fillRule:"evenodd",d:"M11.987 5.036a.754.754 0 0 1 .914-.01c.972.721 1.767 1.218 2.6 1.543.828.322 1.719.485 2.887.505a.755.755 0 0 1 .741.757c-.018 3.623-.43 6.256-1.449 8.21-1.034 1.984-2.662 3.209-4.966 4.083a.75.75 0 0 1-.537-.003c-2.243-.874-3.858-2.095-4.897-4.074-1.024-1.951-1.457-4.583-1.476-8.216a.755.755 0 0 1 .741-.757c1.195-.02 2.1-.182 2.923-.503.827-.322 1.6-.815 2.519-1.535m.468.903c-.897.69-1.717 1.21-2.623 1.564-.898.35-1.856.527-3.026.565.037 3.45.469 5.817 1.36 7.515.884 1.684 2.25 2.762 4.284 3.571 2.092-.81 3.465-1.89 4.344-3.575.886-1.698 1.299-4.065 1.334-7.512-1.149-.039-2.091-.217-2.99-.567-.906-.353-1.745-.873-2.683-1.561m-.009 9.155a2.672 2.672 0 1 0 0-5.344 2.672 2.672 0 0 0 0 5.344m0 1a3.672 3.672 0 1 0 0-7.344 3.672 3.672 0 0 0 0 7.344m-1.813-3.777.525-.526.916.917 1.623-1.625.526.526-2.149 2.152z",clipRule:"evenodd"})))};var c=function(){var e=(0,l.l)();return o.createElement(a.G,{tooltipText:"View community guidelines"},o.createElement(i.N,{href:"https://policy.medium.com/medium-rules-30e5502c4eb4",target:"_blank",className:e((function(e){return{fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark}}}))},o.createElement(u,null)))}},3737:(e,t,n)=>{n.d(t,{L:()=>K});var r=n(45458),o=n(80296),i=n(96540),a=n(82487),l=n(43389),s=n(92554),u=n(52290),c=n(58262),d=n(21771),p=n(84676),f=n(96009),m=n(64467),h=n(73711),v=n(86527),g=n(36557),y=n(44402),E=n(42976),b=n(94644);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,m.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=250,O=5,w=function(e){return{marginLeft:"4px",color:e.colorTokens.foreground.neutral.secondary.base,":hover":{color:e.colorTokens.foreground.neutral.primary.hover}}};function S(e,t,n){return"char"===e&&t>R||"line"===e&&n>O}function T(e){var t=e.paragraphs,n=e.truncateStrategy,r=(0,y.l)(),a=0,l=0,s=(0,i.useState)(!1),c=(0,o.A)(s,2),d=c[0],p=c[1],f="none"!==n&&!d,m=(0,i.useCallback)((function(){p(!0)}),[p]);return i.createElement("pre",{className:r({whiteSpace:"pre-wrap"})},t.map((function(e){if(!d&&S(n,a,l))return null;var t=(null==e?void 0:e.text)||"";a+=t.length||0,l+=t.split("\n").length||0;var o=x(x({},e),{},{dropCapImage:null,hasDropCap:null}),s=!d&&S(n,a,l);if(s&&"char"===n){var c=R-(a-t.length||0);o.markups=o.markups.reduce((function(e,t){if(t.start<c){var n=x({},t);n.end>c&&(n.end=c),e.push(n)}return e}),[]),o.text=(0,b.Mc)(t,c)}return i.createElement(u.a,{padding:"5px 0px",key:e.name||e.id},i.createElement(g.kZ,{scale:"M",color:"DARKER",tag:"div"},i.createElement("div",{className:r({lineHeight:"24px"})},i.createElement(h.O,{paragraph:o,richTextStyle:"FULL_PAGE",paragraphStyle:E.FU.P}),f&&s&&i.createElement(i.Fragment,null,"line"===n&&"...",i.createElement(v.N,{onClick:m,rules:w,linkStyle:"OBVIOUS",inline:!0},"more")))))})).filter((function(e){return!!e})))}var I=n(57975),P=n(60602),C=n(51739),D=n(72130),N=n(49287),A=n(47731),j=n(81878),L=n(65550),M=n(79756);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,m.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=function(e){return{display:"flex",alignItems:"center",gap:"4px",fill:e.colorTokens.foreground.neutral.secondary.base,":hover":{color:e.colorTokens.foreground.neutral.primary.hover,fill:e.colorTokens.foreground.neutral.primary.hover,"& p":{color:e.colorTokens.foreground.neutral.primary.hover}}}},F=function(e,t){return t?"Hide replies":"".concat(e," ").concat(1===e?"reply":"replies")};function H(e){var t=e.label,n=e.onClick,r=e.children;return i.createElement(v.N,{linkStyle:"SUBTLE",rules:V,onClick:n},i.createElement(j.A,{"aria-label":"responses"}),i.createElement(g.kZ,{color:"LIGHTER",scale:"S"},t),r)}var G=function(e){var t=e.response,n=t.postResponses,r=t.id,o=(null==n?void 0:n.count)||0,a=(0,i.useContext)(P.a),s=a.inResponseToEntityId,c=a.inResponseToEntityTypename,d=a.isThreadedResponsesVisible,p=a.toggleThreadedResponses,f=a.threadDepthOnPage,m=a.toggleCreateReply,h=a.loadThreadedResponses,y=a.isThreadedResponsesQueryCalled,E=a.showContinueThisThreadSidebar,b=a.threadDepthFromRootEntity,k=(0,i.useContext)(l.o),x=k.rootEntityId,R=k.rootEntityTypename,O=(0,D.$L)(),w=(0,N.jI)(),S=f>=C.qg,T=S&&o>0,j=(0,L.L)(),_=B(B(B({postId:r},(0,M.rz)(s,c)),(0,M.DL)(x,R)),{},{threadDepth:b,source:w}),V=(0,i.useCallback)((function(){E(),O.event("response.continue",B({},_))}),[E,_]),G=(0,i.useCallback)((function(){d?O.event("response.collapsed",B({},_)):d||O.event("response.expanded",B({},_)),p()}),[p,d,_]),U=(0,i.useCallback)((function(){S?V():(y||h(),m())}),[S,V,y,h,m]);return i.createElement(u.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginTop:"14px"},i.createElement(u.a,{display:"flex",alignItems:"center",gap:"24px"},i.createElement(I.W,{buttonStyle:"SUBTLE_MARGIN",buttonColor:"LIGHTER",countScale:"S",post:t,shouldShowResponsiveLabelText:!0,susiEntry:(0,M.gz)(c)}),T?i.createElement(H,{onClick:V,label:"More replies"},i.createElement(A.A,{height:"24",width:"24"})):o>0&&i.createElement(H,{onClick:G,label:F(o,d)}),!j&&!T&&i.createElement(g.kZ,{color:"DARKER",scale:"S"},i.createElement(v.N,{onClick:U,linkStyle:"OBVIOUS",inline:!0},"Reply"))))},U=n(8381),Z=function(e){var t,n=e.simpleResponse,r=e.parentEntity,o=e.omitBottomBorder,a=n.creator,m=n.content,h=n.mediumUrl,v=(0,i.useRef)(null),g=(0,i.useContext)(l.o).sidebarRef;(0,c.n)(v,n,g);var y=null==m||null===(t=m.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(a&&m&&y&&h))return null;var E,b=(E=y.map((function(e){return e.text||""}))).join("").length>320?"char":E.join("\n").split("\n").length>O?"line":"none",k="none"!==b;return i.createElement(d.V,{post:n,presentationContext:"POST_PREVIEW",isFullPost:!k},i.createElement(u.a,{paddingTop:"25px",paddingBottom:"16px",borderBottom:o?void 0:"neutral.primary",ref:v},i.createElement(p.T,{response:n,responseType:U.a.SIMPLE,parentEntity:r}),i.createElement(f.c,{inResponseToMediaResource:n.inResponseToMediaResource}),i.createElement(u.a,{marginTop:"5px",wordBreak:"break-word"},i.createElement(s.r.Provider,{value:!0},i.createElement(T,{paragraphs:y,truncateStrategy:b}))),i.createElement(G,{response:n})))},q=n(78265),Q=n(16022),z=n(15371),K=function(e){var t,n=e.responsePost,s=e.index,u=e.parentEntity,c=e.omitBottomBorder,d=(0,i.useState)(!1),p=(0,o.A)(d,2),f=p[0],m=p[1],h=(0,i.useState)(null),v=(0,o.A)(h,2),g=v[0],y=v[1],E=(0,i.useContext)(l.o),b=E.editingResponsesAtIndices,k=E.setEditingResponsesAtIndices;return(0,i.useEffect)((function(){if(f&&!b.includes(s)&&k([].concat((0,r.A)(b),[s])),!f&&b.includes(s)){var e=b.filter((function(e){return e!==s}));k(e)}}),[f,b,k]),n?f?i.createElement(a.o.Provider,{value:{isEditing:f,setIsEditing:m,latestRev:n.latestRev,createdAt:n.createdAt,setEditingQuote:y,editingQuote:g}},i.createElement(N.Ne,{source:{index:s},key:n.id,extendSource:!0},i.createElement(Q.n,{type:q.o.edit,parentEntityId:u.id,parentEntityTypename:u.__typename,responseId:n.id,initialValue:null===(t=n.content)||void 0===t?void 0:t.bodyModel,parentCreatorName:"Catalog"===u.__typename?u.creator.username:"",parentEntitySlug:"Catalog"===u.__typename?(0,z.KY)(u):""}))):i.createElement(a.o.Provider,{value:{isEditing:f,setIsEditing:m,setEditingQuote:y,editingQuote:g}},i.createElement(N.Ne,{source:{index:s},key:n.id,extendSource:!0},i.createElement(Z,{parentEntity:u,simpleResponse:n,omitBottomBorder:c}))):null}},82487:(e,t,n)=>{n.d(t,{o:()=>r});var r=n(96540).createContext({isEditing:!1,setIsEditing:function(){return null},setEditingQuote:function(){return null}})},84676:(e,t,n)=>{n.d(t,{T:()=>me});var r=n(96540),o=n(5072),i=n(70600),a=n(36469),l=n(88474),s=n(39),u=n(44402),c=function(e){var t=e.title,n=e.backgroundColor,o=e.color,i=void 0===o?"white":o,a=(0,u.l)(),l=(0,s.Z)({name:"detail",scale:"XS",color:"LIGHTER"});return r.createElement("div",{className:a([l,function(){return{color:i,backgroundColor:n,borderRadius:"4px",marginLeft:"4px",padding:"0 4px"}}])},t)},d=n(27721),p=n(23393),f=n(52290),m=n(86527),h=n(36557),v=n(49287),g=n(20239),y=n(80296),E=n(95420),b=n(69733),k=n(43629),x=n(43389),R=n(79756),O=n(14782),w=n(92759),S=n(72130),T=n(91830),I=function(e,t){e.modify({id:e.identify({__typename:"Post",id:t}),fields:{postResponses:function(e,t){return t.DELETE},threadedPostResponses:function(e,t){return t.DELETE}}})},P=function(e,t){e.modify({id:e.identify({__typename:"Catalog",id:t}),fields:{responsesCount:function(e,t){return t.DELETE},threadedCatalogResponses:function(e,t){return t.DELETE}}})},C=function(e){var t,n,o=e.response,i=e.parentEntity,a=e.hidePopoverMenu,l=(0,d.R)().value,s=r.useContext(x.o).rootEntityTypename,u=(0,S.$L)(),c=(0,v.jI)(),p=(0,b.wA)(),f=r.useState(!1),h=(0,y.A)(f,2),g=h[0],C=h[1],D=function(){return C(!1)},N=null==o||null===(t=o.creator)||void 0===t?void 0:t.id,A=r.useCallback((function(e,t,n){"Post"===t&&I(e,n),"Catalog"===t&&P(e,n)}),[]),j=(0,E.n)(k.k,{variables:{targetUserId:N||"",userId:(null==l?void 0:l.id)||""},update:function(e){A(e,i.__typename,i.id)},onCompleted:function(){D();var e=(0,R.bY)(s);p((0,T.MZ)({message:"Responses by this user have been hidden".concat(e?" from this ".concat(e):"",".")}))}}),L=(0,y.A)(j,1)[0],M=(null==l?void 0:l.id)===(null===(n=i.creator)||void 0===n?void 0:n.id);return(null==l?void 0:l.id)===N?null:l&&N&&M?r.createElement(r.Fragment,null,r.createElement(O.q3,null,r.createElement(m.N,{color:"RED",onClick:function(){C(!0)}},"Block author")),g&&r.createElement(w.D,{onConfirm:function(){u.event("user.blocked",{userId:N,source:c}),L()},isVisible:g,isInResponsesSidebar:!0,hide:function(){D(),a()}})):null},D=function(e){var t,n=e.response,o=e.onClick,i=(0,d.R)().value;return null!=i&&i.id&&(null==i?void 0:i.id)===(null===(t=n.creator)||void 0===t?void 0:t.id)?r.createElement(O.q3,null,r.createElement(m.N,{color:"RED",onClick:o},"Delete response")):null},N=n(82487),A=n(83858),j=function(e){var t=e.isDialogOpen,n=e.cancelDialogAction,o=e.confirmDialogAction;return r.createElement(A.d,{isDialogOpen:t,dialogHeading:"Edit response and story",dialogDescription:"This response is also a story on your profile. Any edits are applied to both.",cancelDialogAction:n,confirmDialogAction:o,confirmDialogButtonText:"Continue",confirmButtonStyle:"STRONG"})},L=n(42976),M=function(e){var t,n,o=e.response,i=(0,d.R)().value,a=r.useState(!1),l=(0,y.A)(a,2),s=l[0],u=l[1],c=r.useContext(N.o),p=c.setIsEditing,f=c.isEditing,h=c.setEditingQuote,v=(null===(t=o.creator)||void 0===t?void 0:t.id)===(null==i?void 0:i.id),g=r.useContext(x.o).sidebarRef;if(null!=g&&g.current&&(n=g.current.scrollTop),!v)return null;var E=o.responseDistribution===L.IZ.DISTRIBUTED;return r.createElement(r.Fragment,null,r.createElement(O.q3,null,r.createElement(m.N,{onClick:function(){E?u(!0):(o.inResponseToMediaResource&&h(o.inResponseToMediaResource.mediumQuote),p(!f))}},"Edit response")),s&&r.createElement(j,{isDialogOpen:s,cancelDialogAction:function(){u(!1),null!=g&&g.current&&(g.current.scrollTop=n)},confirmDialogAction:function(){u(!1),null!=g&&g.current&&(g.current.scrollTop=n),o.inResponseToMediaResource&&h(o.inResponseToMediaResource.mediumQuote),p(!f)}}))},_=n(22986),B={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"HideCatalogResponseOnParent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"parentCatalogId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"catalogResponseId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hideCatalogResponseOnParent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"parentCatalogId"},value:{kind:"Variable",name:{kind:"Name",value:"parentCatalogId"}}},{kind:"Argument",name:{kind:"Name",value:"catalogResponseId"},value:{kind:"Variable",name:{kind:"Name",value:"catalogResponseId"}}}]}]}}]},V=n(60602),F={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"HidePostResponseOnParentMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"parentPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postResponseId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hidePostResponseOnParentPost"},arguments:[{kind:"Argument",name:{kind:"Name",value:"parentPostId"},value:{kind:"Variable",name:{kind:"Name",value:"parentPostId"}}},{kind:"Argument",name:{kind:"Name",value:"postResponseId"},value:{kind:"Variable",name:{kind:"Name",value:"postResponseId"}}}]}]}}]},H=n(23406);function G(e){var t=e.responseToBeHidden,n=e.parentEntity,o=e.hidePopoverMenu,i=e.includeToast,a=n.__typename,l=function(e){var t=e.postResponseId,n=e.parentPostId,o=e.hidePopoverMenu,i=e.includeToast,a=(0,S.$L)(),l=(0,v.jI)(),s=(0,T.zF)(),u=(0,r.useContext)(V.a).inResponseToEntityId,c=(0,r.useContext)(x.o).responseSortType,d=(0,r.useContext)(H.u).highlightGroup,p=(0,E.n)(F,{variables:{postResponseId:t,parentPostId:n},update:function(e){(0,_.e)({cache:e,inResponseToPostId:u,responseId:t,highlightGroupId:null==d?void 0:d.id}),i&&s({toastStyle:"HIDE_POST_RESPONSE",extraParams:{responseId:t,parentPostId:u,sortType:c}}),a.event("response.hidden",{postId:t,source:l}),null==o||o()}});return(0,y.A)(p,1)[0]}({postResponseId:t.id,parentPostId:n.id,hidePopoverMenu:o,includeToast:i}),s=function(e){var t=e.catalogResponseId,n=e.parentCatalogId,o=e.hidePopoverMenu,i=e.includeToast,a=(0,S.$L)(),l=(0,v.jI)(),s=(0,T.zF)(),u=(0,r.useContext)(V.a).inResponseToEntityId,c=(0,r.useContext)(x.o).responseSortType,d=(0,E.n)(B,{variables:{catalogResponseId:t,parentCatalogId:n},update:function(e){(0,_.B)(e,u,t),i&&s({toastStyle:"HIDE_CATALOG_RESPONSE",extraParams:{responseId:t,parentCatalogId:u,sortType:c}}),a.event("response.hidden",{postId:t,source:l}),null==o||o()}});return(0,y.A)(d,1)[0]}({catalogResponseId:t.id,parentCatalogId:n.id,hidePopoverMenu:o,includeToast:i}),u=(0,r.useCallback)((function(){"Post"===a?l():"Catalog"===a&&s()}),[s,l,a]),c=function(e){var t,n,r,o=e.responseToBeHidden,i=e.parentEntity,a=(0,d.R)().value,l=i.__typename,s=(null==a?void 0:a.id)===(null===(t=i.creator)||void 0===t?void 0:t.id),u="Post"===l&&(null==i||null===(n=i.collection)||void 0===n?void 0:n.viewerEdge.isEditor);return!((null==a?void 0:a.id)===(null===(r=o.creator)||void 0===r?void 0:r.id)||"Catalog"===l&&!s||"Post"===l&&!s&&!u)}({responseToBeHidden:t,parentEntity:n});return{canHideResponse:c,hideResponse:u}}var U=function(e){var t=G({responseToBeHidden:e.responseToBeHidden,parentEntity:e.parentEntity,hidePopoverMenu:e.hidePopoverMenu,includeToast:!0}),n=t.canHideResponse,o=t.hideResponse;return n?r.createElement(O.q3,null,r.createElement(m.N,{onClick:o},"Hide response")):null},Z=n(58168),q=n(43634),Q=function(e){var t,n=e.response,o=e.parentEntity,i=e.onClick,a=(0,d.R)().value,l=o.__typename,s=(null==a?void 0:a.id)===(null===(t=n.creator)||void 0===t?void 0:t.id);if(!n.creator||s)return null;var u="Post"===o.__typename?{post:o}:{};return r.createElement(O.q3,null,null!=a&&a.id?r.createElement(m.N,{color:"RED",onClick:i},"Report response..."):r.createElement(q.r,(0,Z.A)({operation:"register",susiEntry:(0,R.gz)(l)},u),"Report response..."))},z=n(1491),K=n(1722),Y=n(56743),$=n(39160),W=n(51771),J=function(e){var t=e.response,n=e.hidePopoverMenu,o=(0,z.f)(),i=(0,S.$L)(),a=(0,d.R)().value,l=(0,v.jI)(),s=(0,K.h)(t),u=(0,$.Dy)((function(e){return e.multiVote.clapsPerPost})),c=(0,b.wA)(),p=(0,W.F)(u,t,s.viewerEdge),f=p.clapCount,h=p.viewerClapCount,g=r.useCallback((function(){o(t,(null==a?void 0:a.id)||"",-h),c((0,Y.K7)({postId:t.id,clapCount:f-h,viewerClapCount:0,viewerHasClappedSinceFetch:!0})),i.event("post.clientUnvote",{postId:t.id,postIds:[t.id],unvoteCount:h,source:l}),n()}),[n,t.id,null==a?void 0:a.id,f,h,o]);return null!=a&&a.id&&0!==f&&0!==h?r.createElement(O.q3,null,r.createElement(m.N,{onClick:g},"Undo claps")):null},X=n(8381),ee=n(24960),te=n(28993),ne=n(20036),re=n(24809),oe=n(60603),ie=n(65550),ae=n(69214),le=n(83573),se=n(21335),ue=n(71984),ce=function(e){var t=e.response,n=e.parentEntity,o=e.hide,i=(0,se.cd)(t.creator).viewerEdge,a=(0,S.$L)(),l=(0,v.jI)(),s=function(e){var t,n=e.response,o=e.parentEntityTypename,i=e.parentEntityId,a=n.id,l=(null===(t=n.creator)||void 0===t?void 0:t.id)||"",s=(0,b.wA)(),u=(0,E.n)(le.s,{variables:{targetPostId:a,targetAuthorId:l,alsoBlockAuthor:!1,reason:"Spam"},onCompleted:function(){s((0,T.MZ)({message:"Successfully reported post."}))}}),c=(0,y.A)(u,2),d=c[0],p=c[1];return{reportStory:r.useCallback((function(e){var t=e.alsoBlockAuthor,n=void 0!==t&&t,r=e.reportReason;return d({variables:{targetPostId:a,targetAuthorId:l,alsoBlockAuthor:n,reason:void 0===r?"Spam":r},update:function(e){n&&("Post"===o&&I(e,i),"Catalog"===o&&P(e,i))}})}),[n,d]),error:null==p?void 0:p.error,loading:null==p?void 0:p.loading}}({response:t,parentEntityTypename:n.__typename,parentEntityId:n.id}),u=s.reportStory,c=G({responseToBeHidden:t,parentEntity:n}),d=c.canHideResponse,p=c.hideResponse,f=(0,r.useCallback)((function(e,n,r){a.event("response.flagged",{postId:t.id,reason:n,source:l}),u({alsoBlockAuthor:e,reportReason:n}),r&&p()}),[u,t.id,l]);return r.createElement(ue.e,{onSubmit:f,hide:o,type:"response",alreadyBlocking:!(null==i||!i.isBlocking),showAlsoHideResponse:d,isVisible:!0})},de=function(e){var t=e.response,n=e.responseType,o=e.parentEntity,i=e.isPopoverMenuVisible,a=(0,ie.L)(),l=(0,oe.e)(!!i),s=(0,y.A)(l,4),u=s[0],c=s[2],d=s[3],p=(0,oe.e)(!1),f=(0,y.A)(p,3),m=f[0],h=f[1],g=f[2],E=(0,oe.e)(!1),b=(0,y.A)(E,3),k=b[0],x=b[1],R=b[2];return r.createElement(r.Fragment,null,r.createElement(ee.A,{isVisible:u,hide:c,hideOnOutsideClick:!0,noPortal:!0,popoverRenderFn:function(){return r.createElement(O.Ni,null,n===X.a.SIMPLE&&!a&&r.createElement(M,{response:t}),n===X.a.SIMPLE&&r.createElement(J,{response:t,hidePopoverMenu:c}),r.createElement(U,{responseToBeHidden:t,parentEntity:o,hidePopoverMenu:c}),r.createElement(C,{response:t,parentEntity:o,hidePopoverMenu:c}),r.createElement(Q,{response:t,parentEntity:o,onClick:x}),r.createElement(D,{response:t,onClick:h}))}},r.createElement(te.P,{onClick:d,rules:(0,ne.E)()},r.createElement(re.A,null))),m&&r.createElement(ae.G,{responseId:t.id,responseDistribution:t.responseDistribution,hide:g,hidePopoverMenu:c}),k&&r.createElement(v.Ne,{source:{dimension:"report_post"},extendSource:!0},r.createElement(ce,{response:t,parentEntity:o,hide:R})))},pe=n(66356),fe={display:"flex",alignItems:"center",gap:"4px",":hover p":{textDecoration:"underline"}},me=function(e){var t,n=e.response,s=e.responseType,u=e.parentEntity,y=(0,d.R)().value,E=(0,g.D)(),b=n.creator,k=n.mediumUrl,x=n.createdAt,O=(0,l.E)(b);if(!n||!b||!k)return null;var w=(null===(t=u.creator)||void 0===t?void 0:t.id)===b.id,S=(null==y?void 0:y.id)===b.id,T=null;w?T=r.createElement(c,{title:"Author",backgroundColor:E.colorTokens.background.accent.primary.base}):S&&(T=r.createElement(c,{title:"You",backgroundColor:E.colorTokens.background.neutral.secondary.base,color:E.colorTokens.foreground.neutral.secondary.base}));var I=function(e,t){return e&&t===X.a.SIMPLE}(n,s)&&(null==n?void 0:n.firstPublishedAt)!==(null==n?void 0:n.latestPublishedAt);return r.createElement(f.a,{display:"flex",justifyContent:"space-between"},r.createElement(f.a,{display:"flex",alignItems:"center"},r.createElement(o.E,{user:b},r.createElement(p.H8,{scale:"XS",user:b,showBadge:!0,showHoverState:!0})),r.createElement(f.a,{paddingLeft:"12px"},r.createElement(f.a,{display:"flex",alignItems:"center"},r.createElement(o.E,{user:b,rules:fe},r.createElement(f.a,{display:"flex",alignItems:"baseline",gap:"4px"},r.createElement(h.kZ,{scale:"M",color:"DARKER",clamp:1},b.name),r.createElement(i.U,{user:b,scale:"S",clamp:1})),O&&r.createElement(f.a,{marginTop:"1px"},r.createElement(a.b,{size:"S"}))),T),r.createElement(m.N,{href:k,follow:!1},r.createElement(h.kZ,{scale:"S"},r.createElement(pe.c,{timestamp:null!=x?x:0,includeMinutesAgo:!0,isSameYearShorthand:!0}),I&&r.createElement(r.Fragment,null,"Â (edited)"))))),r.createElement(v.Ne,{source:{susiEntry:(0,R.gz)(u.__typename)},extendSource:!0},r.createElement(de,{response:n,responseType:s,parentEntity:u})))}},66274:(e,t,n)=>{n.d(t,{V:()=>s});var r=n(96540),o=n(52290),i=n(98761),a=n(44402),l={"0%":{opacity:"0.8"},"50%":{opacity:"0.5"},"100%":{opacity:"0.8"}},s=function(){var e=(0,i.h)({shimmerKeyframesName:l}).shimmerKeyframesName,t=(0,a.l)();return r.createElement("div",{className:t((function(){return{animation:"".concat(e," 1.2s ease-in-out infinite"),padding:"32px 0"}}))},r.createElement(o.a,{display:"flex",flexDirection:"row"},r.createElement(o.a,{height:"32px",width:"32px",borderRadius:"100%",backgroundColor:"BASE_NORMAL"}),r.createElement(o.a,{marginLeft:"8px",marginTop:"4px"},r.createElement(o.a,{height:"8px",width:"120px",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(o.a,{height:"8px",width:"80px",backgroundColor:"BASE_NORMAL"}))),r.createElement(o.a,{marginTop:"12px"},r.createElement(o.a,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(o.a,{height:"10px",width:"100%",marginBottom:"8px",backgroundColor:"BASE_NORMAL"}),r.createElement(o.a,{height:"10px",width:"90%",backgroundColor:"BASE_NORMAL"})))}},96009:(e,t,n)=>{n.d(t,{c:()=>m});var r=n(64467),o=n(96540),i=n(45639),a=n(44402),l=n(20239),s=n(42976),u=n(42396),c=n(38893),d=n(23406);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t=e.inResponseToMediaResource,n=(0,a.l)(),r=(0,l.D)(),p=(0,u.x)((function(){var e=null==t?void 0:t.href;if(e){var n=null==e?void 0:e.split("#")[1];if(n){var r=n.split("--")[0];if(r){var o=document.getElementById(r);if(o){var i=(null==o?void 0:o.offsetTop)-100;i&&window.scrollTo({top:i,behavior:"smooth"})}}}}}),[null==t?void 0:t.href]);if((0,o.useContext)(d.u).highlightGroup)return null;var m=null==t?void 0:t.mediumQuote;if(!m)return null;var h=(0,c.Oi)(m);if(!h||!h.type)return null;var v=h.type;return v===s.FU.IMG||v===s.FU.IFRAME||v===s.FU.COVER_TITLE||v===s.FU.HR||v===s.FU.MIXTAPE_EMBED||v===s.FU.SECTION_CAPTION?null:o.createElement("div",{onClick:p,onKeyDown:p,role:"button",tabIndex:0,className:n({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",marginTop:"22px",marginBottom:"3px",padding:"20px 16px",cursor:"pointer",backgroundColor:r.backgroundColor})},o.createElement(i.i,{paragraph:f(f({},h),{},{name:"embedded-quote-".concat(m.quoteId,"-").concat(h.name)}),paragraphStyle:v,spaceTop:4,richTextStyle:"STREAM"}))}},43389:(e,t,n)=>{n.d(t,{o:()=>i});var r=n(96540),o=n(42976),i=r.createContext({setIsSavingResponse:function(){return null},editingResponsesAtIndices:[],setEditingResponsesAtIndices:function(){return null},sidebarRef:null,responseDistribution:o.IZ.NOT_DISTRIBUTED,setResponseDistribution:function(){},responseSortType:o.CD.TOP,rootEntityId:"",isResponsesSidebarVisible:!1,showCreateReplyEditor:!1})},51772:(e,t,n)=>{n.d(t,{N:()=>b});var r=n(96540),o=n(84676),i=n(52290),a=n(86975),l=n(36557),s=n(44402),u=n(20239),c=n(21771),d=n(42976),p=n(86684),f=n(80591),m=n(27715),h=n(46879),v=n(96009),g=n(8381);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){return{fill:e.colorTokens.foreground.neutral.secondary.base,float:"right"}},b=function(e){var t,n,b=e.storyResponse,k=e.parentEntity,x=e.omitBottomBorder,R=(0,s.l)(),O=(0,u.D)(),w=b.creator,S=b.previewContent,T=b.mediumUrl,I=b.clapCount,P=b.responsesCount,C=null==S||null===(t=S.bodyModel)||void 0===t?void 0:t.paragraphs;if(!(w&&S&&S.bodyModel&&T&&C))return null;var D=function(e){var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o.text&&(n.push(o),n.length>=2))break}}catch(e){r.e(e)}finally{r.f()}return{title:n[0],subtitle:n[1]}}(C);if(!D.title&&!D.subtitle)return null;var N,A=null!==(null===(n=b.inResponseToMediaResource)||void 0===n?void 0:n.mediumQuote),j=P||0;return r.createElement(c.V,{post:b,presentationContext:"POST_PREVIEW",isFullPost:!1},r.createElement(i.a,{paddingTop:"25px",paddingBottom:"20px",borderBottom:x?void 0:"neutral.primary"},r.createElement(o.T,{response:b,responseType:g.a.STORY,parentEntity:k}),r.createElement(v.c,{inResponseToMediaResource:b.inResponseToMediaResource}),r.createElement(a.D,{href:(0,h.us)(b)},r.createElement("div",{className:R({boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"12px",marginTop:A?"12px":"16px",backgroundColor:O.backgroundColor})},r.createElement("div",{className:R(E)},r.createElement(l.kZ,{scale:"S",color:"LIGHTER",tag:"div"},r.createElement(i.a,{display:"flex",flexGrow:"0",alignItems:"center",marginLeft:(null!=I?I:0)>0||j>0?"20px":"0"},(null!=I?I:0)>0?r.createElement(i.a,{display:"flex",alignItems:"center"},r.createElement(i.a,{tag:p.A,marginRight:"2px"}),r.createElement("div",null,(0,m.Ct)(null!=I?I:0))):null,j>0?r.createElement(i.a,{display:"flex",alignItems:"center"},r.createElement(i.a,{tag:f.A,marginLeft:I?"8px":"0",marginRight:"2px"}),r.createElement("div",null,(0,m.Ct)(j))):null))),r.createElement(l.kZ,{scale:"M",clamp:2,color:"DARKER"},D.title&&r.createElement(i.a,null,D.title.text),D.subtitle&&r.createElement("div",{className:R((N=D.title.type,function(e){return{color:N===d.FU.H3?e.colorTokens.foreground.neutral.secondary.base:e.colorTokens.foreground.neutral.primary.base}}))},D.subtitle.text))))))}},15939:(e,t,n)=>{n.d(t,{c:()=>h});var r=n(64467),o=n(45458),i=n(96540),a=n(8389),l=n(43389),s=n(52290),u=n(72130),c=n(49287),d=n(95087),p=n(79756);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t=e.replies,n=e.parentEntity,r=e.inResponseToEntityId,f=e.threadDepthFromRootEntity,h=e.threadDepthOnPage,v=void 0===h?1:h,g=e.displayBottomBorder,y=void 0!==g&&g,E=e.isShowAutoExpandedResponse,b=void 0!==E&&E,k=e.autoExpandedResponseIds,x=void 0===k?[]:k,R=e.inResponseToEntityTypename,O=(0,u.$L)(),w=(0,c.jI)(),S=i.useContext(l.o),T=S.rootEntityId,I=S.rootEntityTypename,P=S.isResponsesSidebarVisible,C=S.showCreateReplyEditor,D=function(e,t,n){var r,i="HighlightGroupResponsesConnection"===(null==e?void 0:e.__typename)?e.edges.map((function(e){return e.node})):null!==(r=null==e?void 0:e.posts)&&void 0!==r?r:[];return n?i.filter((function(e){return t.some((function(t){return t===e.id}))})):(0,o.A)(i)}(t,x,b);return i.useEffect((function(){b&&P&&D.forEach((function(e){O.event("response.autoExpanded",m(m(m({postId:e.id},(0,p.rz)(r,R)),(0,p.DL)(T,I)),{},{threadDepth:f,context:a.J.INLINE_POST_RESPONSE,source:w}))}))}),[]),D&&0!==D.length?i.createElement(s.a,null,D.map((function(e,t,o){if(!e)return null;var a=t!==o.length-1||y;return i.createElement(d.W,{reply:e,parentEntity:n,bottomBorder:a,index:t,inResponseToEntityId:r,inResponseToEntityTypename:R,key:e.id,threadDepthFromRootEntity:f,threadDepthOnPage:v,showCreateReplyEditor:C&&0===t})}))):null}},95087:(e,t,n)=>{n.d(t,{C:()=>A,W:()=>j});var r=n(64467),o=n(80045),i=n(45458),a=n(80296),l=n(77969),s=n(96540),u=n(74793),c=n(8389),d=n(70694),p=n(3737),f=n(66274),m=n(43389),h=n(51772),v=n(60602),g=n(33920),y=n(23406),E=n(85864),b=n(52290),k=n(86527),x=n(36557),R=n(72130),O=n(49287),w=n(44402),S=n(15939),T=n(51387),I=n(79756),P=n(58192),C=["__typename"];function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e,t){return function(n){return{marginBottom:e?"0px":"24px",marginLeft:"12px",borderLeft:"3px solid ".concat(n.colorTokens.border.neutral.primary.base),padding:t?"0 24px":void 0}}},j=function(e){var t,n,r,D,j,L=e.reply,M=e.parentEntity,_=e.bottomBorder,B=e.index,V=e.inResponseToEntityId,F=e.threadDepthOnPage,H=void 0===F?1:F,G=e.threadDepthFromRootEntity,U=e.showCreateReplyEditor,Z=void 0!==U&&U,q=e.inResponseToEntityTypename,Q=(0,w.l)(),z=(0,O.jI)(),K=(0,R.$L)(),Y=(0,s.useState)((function(){var e,t;return null!==(e=L.autoExpandedResponses)&&void 0!==e&&e.length?L.autoExpandedResponses.map((function(e){return e.id})):null!==(t=L.threadedPostResponses)&&void 0!==t&&t.autoExpandedPostIds?(0,i.A)(L.threadedPostResponses.autoExpandedPostIds):[]})),$=(0,a.A)(Y,1)[0],W=(0,s.useState)(Boolean($.length)),J=(0,a.A)(W,2),X=J[0],ee=J[1],te=(0,s.useContext)(m.o),ne=te.responsesLocked,re=te.isLockedResponse,oe=te.setIsSavingResponse,ie=te.sidebarRef,ae=te.responseDistribution,le=te.setResponseDistribution,se=te.responseSortType,ue=te.rootEntityId,ce=te.rootEntityTypename,de=te.isResponsesSidebarVisible,pe=(0,s.useContext)(y.u).addContinueThisThreadSidebar,fe=(0,s.useState)([]),me=(0,a.A)(fe,2),he=me[0],ve=me[1],ge=(0,s.useRef)(null),ye=(0,s.useRef)(null),Ee=null===(t=L.creator)||void 0===t?void 0:t.name;Ee&&(j="Replying to ".concat(Ee));var be=(0,l._)(T.tM,{variables:{postId:L.id,postResponsesPaging:{limit:I.TC},sortType:se},ssr:!1}),ke=(0,a.A)(be,2),xe=ke[0],Re=ke[1],Oe=Re.called,we=Re.data,Se=Re.loading,Te=Re.fetchMore;(0,s.useEffect)((function(){var e;null!=ge&&null!==(e=ge.current)&&void 0!==e&&e.getBoundingClientRect&&ge.current.getBoundingClientRect().bottom>window.innerHeight&&ge.current.scrollIntoView({behavior:"smooth",block:"end"})}),[]);var Ie=null==we||null===(n=we.post)||void 0===n?void 0:n.threadedPostResponses;X&&!Oe&&xe();var Pe,Ce=(null==Ie?void 0:Ie.posts)||[],De=(null===(r=L.postResponses)||void 0===r?void 0:r.count)||0,Ne=(0,P.M)(X,$,Ce.length,De),Ae=Ne>0,je=null==Ie||null===(D=Ie.pagingInfo)||void 0===D?void 0:D.next;return je&&(Pe=function(){if(Te){je.__typename;var e=(0,o.A)(je,C);Te({variables:{postId:L.id,postResponsesPaging:e}})}}),s.createElement(E.B,{initialVisibility:X},(function(e){var t=e.isVisible,n=e.toggle,r=e.show;return s.createElement(E.B,{initialVisibility:Z},(function(e){var o,i=e.isVisible,a=e.hide,l=e.toggle;return s.createElement(b.a,{borderBottom:_?"neutral.primary":"NONE",marginLeft:"24px",marginRight:H>1?"0":"24px",ref:ye},s.createElement(v.a.Provider,{value:{inResponseToEntityId:V,isThreadedResponsesVisible:t,inResponseToEntityTypename:q,toggleThreadedResponses:function(){Oe||xe(),ee(!1),n()},showThreadedResponses:function(){Oe||(xe(),K.event("response.expanded",N(N(N({postId:L.id},(0,I.rz)(V,q)),(0,I.DL)(ue,ce)),{},{threadDepth:G,context:c.J.INLINE_POST_RESPONSE,source:z}))),ee(!1),r()},threadDepthFromRootEntity:G,threadDepthOnPage:H,hideCreateReply:a,toggleCreateReply:l,loadThreadedResponses:xe,isThreadedResponsesQueryCalled:Oe,isThreadedResponsesQueryLoading:Se,showContinueThisThreadSidebar:function(){pe(L)}}},s.createElement("div",{ref:0===B?ge:void 0},(0,d.kb)(L)?s.createElement(p.L,{responsePost:L,index:B,parentEntity:M,omitBottomBorder:!0}):s.createElement(O.Ne,{source:{index:B},key:L.id,extendSource:!0},s.createElement(h.N,{storyResponse:L,parentEntity:M,omitBottomBorder:!0}))),i&&s.createElement("div",{className:Q(A(t,!0))},s.createElement(O.Ne,{source:{susiEntry:(0,I.gz)(q)},extendSource:!0},s.createElement(u.jG,{localStorageId:"".concat(L.id,"-reply")},s.createElement(g.Q,{parentEntityId:L.id,parentEntityTypename:"Post",hideReplyEditing:a,placeholder:j,showEditorHeader:!1}))))),t&&s.createElement("div",{className:Q(A(Ae))},Se&&s.createElement(b.a,{marginLeft:"24px"},s.createElement(f.V,null)),(null==Ie?void 0:Ie.posts)&&(null==Ie||null===(o=Ie.posts)||void 0===o?void 0:o.length)>0&&s.createElement(m.o.Provider,{value:{setIsSavingResponse:oe,responsesLocked:ne,isLockedResponse:re,editingResponsesAtIndices:he,setEditingResponsesAtIndices:ve,sidebarRef:ie,responseDistribution:ae,setResponseDistribution:le,responseSortType:se,rootEntityId:ue,rootEntityTypename:ce,isResponsesSidebarVisible:de}},s.createElement(S.c,{replies:Ie,parentEntity:M,inResponseToEntityId:L.id,inResponseToEntityTypename:"Post",threadDepthOnPage:H+1,threadDepthFromRootEntity:G+1,isShowAutoExpandedResponse:X,autoExpandedResponseIds:$}))),Ae&&(t||X)&&s.createElement(b.a,{marginTop:"10px",marginLeft:"24px",marginBottom:"24px"},s.createElement(x.kZ,{color:"ACCENT",scale:"M"},s.createElement(k.N,{linkStyle:"OBVIOUS",onClick:function(){X?(ee(!1),r()):Pe()}},(0,P.s)(X,Ne)))))}))}))}},33920:(e,t,n)=>{n.d(t,{Q:()=>F});var r=n(82284),o=n(10467),i=n(80296),a=n(64467),l=n(96540),s=n(69733),u=n(17180),c=n(8389),d=n(69433),p=n(43389),f=n(60602),m=n(45458),h=n(95420),v=n(79756),g=n(16765),y=n(62544),E=n(92571),b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PublishCatalogResponseMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"inResponseToCatalogId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"deltas"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Delta"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"responseDistribution"}},type:{kind:"NamedType",name:{kind:"Name",value:"ResponseDistributionType"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sortType"}},type:{kind:"NamedType",name:{kind:"Name",value:"ResponseSortType"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"publishCatalogResponse"},arguments:[{kind:"Argument",name:{kind:"Name",value:"inResponseToCatalogId"},value:{kind:"Variable",name:{kind:"Name",value:"inResponseToCatalogId"}}},{kind:"Argument",name:{kind:"Name",value:"deltas"},value:{kind:"Variable",name:{kind:"Name",value:"deltas"}}},{kind:"Argument",name:{kind:"Name",value:"responseDistribution"},value:{kind:"Variable",name:{kind:"Name",value:"responseDistribution"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"StoryResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SimpleResponse_threadedSimpleResponse_defaultPostResponses"}}]}}]}}]}}].concat((0,m.A)(y.UZ.definitions),(0,m.A)(E.uS.definitions),(0,m.A)(E.jC.definitions))};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=n(99836),O=n(78265),w=n(20704),S=n(7765);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=n(27721),C=n(36557),D=n(72130),N=n(49287),A=n(44402),j=n(42976),L=n(91830),M=n(23406);function _(){_=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,a=Object.create(o.prototype),l=new D(r||[]);return i(a,"_invoke",{value:T(e,n,l)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",m="suspendedYield",h="executing",v="completed",g={};function y(){}function E(){}function b(){}var k={};c(k,l,(function(){return this}));var x=Object.getPrototypeOf,R=x&&x(x(N([])));R&&R!==n&&o.call(R,l)&&(k=R);var O=b.prototype=y.prototype=Object.create(k);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,a,l,s){var u=p(e[i],e,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==(0,r.A)(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,s)}),(function(e){n("throw",e,l,s)})):t.resolve(d).then((function(e){c.value=e,l(c)}),(function(e){return n("throw",e,l,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function T(t,n,r){var o=f;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var s=I(l,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?v:m,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function I(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError((0,r.A)(t)+" is not iterable")}return E.prototype=b,i(O,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:E,configurable:!0}),E.displayName=c(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},w(S.prototype),c(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new S(d(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(O),c(O,u,"Generator"),c(O,l,(function(){return this})),c(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(e){var t,n,r,a,y=e.parentEntityId,E=e.parentEntityTypename,k=e.parentVersionId,T=e.placeholder,B=e.hideReplyEditing,F=void 0===B?function(){}:B,H=e.editorOpenByDefault,G=void 0===H||H,U=e.showEditorHeader,Z=void 0===U||U,q=e.viewerPronouns,Q=e.autofocus,z=e.scrollIntoView,K=void 0===z||z,Y=e.showPublishCheckbox,$=void 0===Y?!G:Y,W=(0,l.useContext)(p.o),J=W.setIsSavingResponse,X=W.responsesLocked,ee=W.responseDistribution,te=W.setResponseDistribution,ne=W.responseSortType,re=W.rootEntityId,oe=W.rootEntityTypename,ie=(0,l.useContext)(M.u),ae=ie.inResponseToQuote,le=ie.highlightGroup,se=ie.setInResponseToQuote,ue=(0,l.useContext)(f.a),ce=ue.showThreadedResponses,de=ue.isThreadedResponsesQueryLoading,pe=ue.threadDepthFromRootEntity,fe=(0,N.jI)(),me=(0,D.$L)(),he=(0,s.wA)(),ve=(0,A.l)(),ge=(0,l.useRef)(null),ye=(0,P.R)().value;(0,l.useEffect)((function(){var e;K&&null!=ge&&null!==(e=ge.current)&&void 0!==e&&e.getBoundingClientRect&&ge.current.getBoundingClientRect().bottom>window.innerHeight&&ge.current.scrollIntoView({behavior:"smooth",block:"end"})}),[K]);var Ee=(0,l.useCallback)((function(e){J(!1);var t="Something went wrong. Please try again.";(0,u._5)(e)?t="Youâve reached the limit for responses that can be published in one day.":(0,u.El)(e)&&(t="This post is not accepting responses."),he((0,L.MZ)({message:t,toastStyle:"ERROR"}))}),[]),be=(0,l.useCallback)((function(e){if(e){me.event("inlineEditor.publish",{postId:y,context:c.J.INLINE_POST_RESPONSE,source:fe});var t=(0,v.DL)(re,oe),n=(0,v.rz)(y,E);me.event("response.created",V(V(V({postId:e.id},n),t),{},{threadDepth:pe+1,context:c.J.INLINE_POST_RESPONSE,source:fe})),e.responseDistribution===j.IZ.DISTRIBUTED&&me.event("response.distributed",V(V(V({postId:e.id},n),t),{},{threadDepth:pe+1,context:c.J.INLINE_POST_RESPONSE,source:fe})),J(!1),ce(),e.responseDistribution===j.IZ.DISTRIBUTED&&(he((0,L.MZ)({toastStyle:"PUBLISH_RESPONSE",extraParams:{response:e},duration:5e3})),te(j.IZ.NOT_DISTRIBUTED))}}),[me,fe,pe,re,oe,y,E,ce]),ke=function(e){var t=e.parentPostId,n=e.onCompleted,r=e.onError,o=e.highlightGroup;return(0,h.n)(S.GQ,{update:function(e,n){var r,i=null===(r=n.data)||void 0===r?void 0:r.publishPostThreadedResponse;if(i){var a=e.writeFragment({data:i,fragment:S.Nl,fragmentName:"PublishPostThreadedResponse_post"});e.modify({id:e.identify({__typename:"Post",id:t}),fields:{postResponses:function(e){var t;return I(I({},e),{},{count:(null!==(t=null==e?void 0:e.count)&&void 0!==t?t:0)+1})},threadedPostResponses:function(e){return I(I({},e),{},{posts:e.posts?[a].concat((0,m.A)(e.posts)):[a]})}}}),o&&e.modify({id:e.identify(o),fields:{responseCount:function(e){return e+1},responses:function(e){return I(I({},e),{},{edges:[{__typename:"HighlightGroupResponsesEdge",node:a}].concat((0,m.A)(e.edges))})}}})}},onCompleted:n,onError:r})}({parentPostId:y,onCompleted:function(e){be(null==e?void 0:e.publishPostThreadedResponse)},onError:function(e){Ee(null==e?void 0:e.graphQLErrors)},highlightGroup:Z?le:void 0}),xe=(0,i.A)(ke,2),Re=xe[0],Oe=xe[1],we=Oe.loading,Se=Oe.error,Te=function(e){var t=e.parentCatalogId,n=e.responseSortType,r=e.onCompleted,o=e.onError;return(0,h.n)(b,{update:function(e,r){var o,i,a,l,s=function(e,t,n){return{id:e.identify({__typename:"Catalog",id:t}),fragment:g.Kl,fragmentName:"SimpleResponse_threadedSimpleResponse_defaultCatalogResponses",variables:{sortType:n,defaultPagingOptions:{limit:v.TC}}}}(e,t,n),u=(i=e.readFragment(s),l=null==(o=r.data)?void 0:o.publishCatalogResponse,null!=i&&i.threadedCatalogResponses&&"Post"===(null==l?void 0:l.__typename)?x(x({},i),{},{responsesCount:(i.responsesCount||0)+1,threadedCatalogResponses:x(x({},i.threadedCatalogResponses),{},{posts:[l].concat((0,m.A)((null===(a=i.threadedCatalogResponses)||void 0===a?void 0:a.posts)||[]))})}):null);null!==u&&e.writeFragment(x(x({},s),{},{data:x({},u)}))},onCompleted:r,onError:o})}({parentCatalogId:y,responseSortType:ne,onCompleted:function(e){be(null==e?void 0:e.publishCatalogResponse)},onError:function(e){Ee(null==e?void 0:e.graphQLErrors)}}),Ie=(0,i.A)(Te,2),Pe=Ie[0],Ce=Ie[1],De=Ce.loading,Ne=Ce.error,Ae=(0,d.p)({targetPostId:y,targetPostVersionId:null!=k?k:"",paragraphName:null!==(t=null==le?void 0:le.paragraph.name)&&void 0!==t?t:"",text:null!==(n=null==le?void 0:le.paragraph.text)&&void 0!==n?n:"",startOffset:null!==(r=null==le?void 0:le.startOffset)&&void 0!==r?r:0,endOffset:null!==(a=null==le?void 0:le.endOffset)&&void 0!==a?a:0,quoteType:j.Gv.RESPONSE,viewer:ye}),je=(0,l.useCallback)(function(){var e=(0,o.A)(_().mark((function e(t,n){var r,o,i,a,l,s,u,c,d;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J(!0),"Post"!==E){e.next=20;break}if(o=(null==ae?void 0:ae.id)||null,!Z||!le){e.next=14;break}return e.next=6,Ae();case 6:if(l=e.sent,!(s=null===(i=l.data)||void 0===i||null===(a=i.createQuote)||void 0===a?void 0:a.id)){e.next=12;break}o=s,e.next=14;break;case 12:return Ee(l.errors),e.abrupt("return");case 14:return e.next=16,Re({variables:{inResponseToPostId:y,deltas:t,inResponseToQuoteId:o,responseDistribution:ee||null,sortType:ne}});case 16:null!=(u=e.sent)&&null!==(r=u.data)&&void 0!==r&&r.publishPostThreadedResponse?n():null!=u&&u.errors&&Ee(u.errors),e.next=25;break;case 20:if("Catalog"!==E){e.next=25;break}return e.next=23,Pe({variables:{inResponseToCatalogId:y,deltas:t,responseDistribution:ee||null,sortType:ne}});case 23:null!=(d=e.sent)&&null!==(c=d.data)&&void 0!==c&&c.publishCatalogResponse?n():null!=d&&d.errors&&Ee(d.errors);case 25:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[E,y,ae,ee,ne,Ae,le,Z]),Le=(0,l.useCallback)((0,o.A)(_().mark((function e(){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se(void 0),F(),e.abrupt("return",{preventStateUpdate:!1});case 3:case"end":return e.stop()}}),e)}))),[F]),Me=(0,u.Ox)(Se)||(0,u.Ox)(Ne)||X;return(0,l.useEffect)((function(){Me&&J(!1)}),[Me]),Me?l.createElement(R.x,{message:(0,v.it)(oe)}):l.createElement("div",{ref:ge},l.createElement(C.kZ,{scale:"M",color:"DARKER",tag:"div"},l.createElement("div",{className:ve({lineHeight:"24px"})},l.createElement(w.d,{isPublishingResponse:we||De,publishResponse:je,type:O.o.create,inResponseToQuote:ae,onClose:Le,editorOpenByDefault:G,placeholder:T,showEditorHeader:Z,disableReplyButton:de,showPublishCheckbox:$,responseDistribution:ee,toggleResponseDistribution:function(){ee===j.IZ.DISTRIBUTED?te(j.IZ.NOT_DISTRIBUTED):te(j.IZ.DISTRIBUTED)},viewerPronouns:q,autofocus:Q,highlightGroup:Z?le:void 0}))))}},99836:(e,t,n)=>{n.d(t,{x:()=>c});var r=n(96540),o=n(43389),i=n(79756),a=n(52290),l=n(86527),s=n(36557),u=n(46879),c=function(e){var t=e.message,n=r.useContext(o.o).rootEntityTypename,c=(0,i.bY)(n),d="The author has closed discussion".concat(c?" for this ".concat(c):"","."),p=t||d;return r.createElement(a.a,{backgroundColor:"BASE_NORMAL",display:"flex",flexDirection:"row",alignItems:"center",padding:"16px",marginBottom:"24px"},r.createElement(s.kZ,{scale:"M",tag:"span",color:"DARKER"},p," ",r.createElement(l.N,{href:(0,u.GPf)(),target:"_blank",inline:!0,linkStyle:"OBVIOUS"},"Learn more.")))}},10247:(e,t,n)=>{n.d(t,{I:()=>u});var r=n(96540),o=n(45639),i=n(44402),a=n(42976),l=n(18642),s=n(38893),u=function(e){var t=e.quote,n=(0,i.l)(),u=(0,s.Oi)(t);return u?r.createElement("div",{className:n({background:(0,l.u7)(1),boxShadow:"0px 1px 4px rgba(0,0,0,0.04)",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"3px",padding:"20px 16px",margin:"10px 14px 0 14px","& mark":{cursor:"text"}})},r.createElement(o.i,{paragraph:u,paragraphStyle:a.FU.P,spaceTop:4,richTextStyle:"STREAM"})):null}},78265:(e,t,n)=>{var r;n.d(t,{o:()=>r}),function(e){e.edit="EDIT",e.create="CREATE"}(r||(r={}))},20704:(e,t,n)=>{n.d(t,{d:()=>he});var r,o=n(82284),i=n(80296),a=n(10467),l=n(64467),s=n(2404),u=n.n(s),c=n(96540),d=n(42295),p=n(38913),f=n(70600),m=n(74793),h=n(47266),v=n(37333),g=n(70694),y=n(27799),E=n(86143),b=n(18677),k=n(60602),x=n(10247),R=n(44402),O=function(e){var t=e.onFocus,n=e.responseContent,r=e.setResponseContent,o=e.setIsEmpty,i=e.isEditorOpen,a=(0,R.l)();return c.createElement("textarea",{placeholder:"What are your thoughts?",value:n,onChange:function(e){var t=e.target.value;o(!t),r(t)},onFocus:t,className:a({width:"100%",padding:"14px",resize:"none",minHeight:i?"100px":"0",height:i?"auto":"47px",fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",outline:"0",border:"0"})})},w=n(24960),S=n(5600),T=n(36557),I=n(20239),P=n(18642),C=n(78693),D=n(44379);function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(null,arguments)}const A=function(e){return c.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",width:21,height:21,fill:"none",viewBox:"0 0 21 21"},e),r||(r=c.createElement("path",{fill:"#000",d:"m5.82 6.215-1.776 4.993h3.63zm-.281-1.89h1.186l4.316 11.268 1.08.22v.738H8.036v-.738l1.116-.088.132-.255-1.301-3.436H3.737L2.454 15.47l.184.255 1.17.088v.738H.282v-.738l1.037-.22zM17.949 14.899v-3.173q-2.259.624-2.971 1.143-.703.518-.703 1.362 0 .677.387 1.081.395.396 1.054.396.423 0 .967-.203.554-.202 1.266-.606m0 .606q-.87.598-1.6.888-.72.282-1.353.281-1.046 0-1.68-.633-.623-.632-.623-1.67 0-1.15.94-1.81.95-.66 4.316-1.468v-.571q0-1.134-.37-1.573-.368-.44-1.283-.44-.343 0-.676.07a4.4 4.4 0 0 0-.695.212v1.511h-1.239q-.325 0-.448-.114-.114-.123-.114-.44 0-.878 1.01-1.458 1.02-.58 2.628-.58 1.416 0 2.057.615.642.615.641 1.977v5.22l.308.291.95.088v.65h-2.532z"})))};var j=n(58952),L=n(79200),M=function(e,t,n){var r=t&&!e;return{margin:"0 4px",cursor:e?"default":"pointer",opacity:e?"0.3":"1",padding:"6px",borderRadius:"4px",display:"inline-flex",justifyContent:"center",backgroundColor:r?n.colorTokens.background.neutral.secondary.base:null,":hover":{backgroundColor:e?null:n.colorTokens.background.neutral.secondary.base},"> svg > path":{fill:r?n.colorTokens.foreground.neutral.primary.base:P.Dx},"> span > svg > path":{fill:r?n.colorTokens.foreground.neutral.primary.base:P.Dx},border:"1px solid ".concat(r?n.colorTokens.border.neutral.tertiary.base:"transparent")}},_=function(e){var t=e.editor,n=e.buttonKeys,r=e.showSubMenu,o=e.disabled,i=e.setShowSubMenu,a=(0,R.l)();return t&&n&&n.length>0?c.createElement(w.A,{disablePortalOverlay:!0,isVisible:r&&!o,noArrow:!0,noPortal:!0,placement:"top",targetDistance:10,popoverRenderFn:function(){return c.createElement(T.kZ,{tag:"span",scale:"M"},c.createElement("span",{className:a({display:"flex",padding:"8px 4px"})},n.map((function(e){return c.createElement(B,{key:e,format:e,disabled:o,slateEditor:t,showSubMenu:r,setShowSubMenu:i})}))))},customZIndex:C.Ay.selectionMenu,referenceHeight:"100%",refTag:"span",shouldAnimateOpen:!0},c.createElement(A,null)):null},B=function(e){var t=e.format,n=e.disabled,r=e.slateEditor,o=e.subMenuKeys,i=void 0===o?[]:o,a=e.showSubMenu,l=e.setShowSubMenu,s=(0,R.l)(),u=(0,I.D)(),d=(0,m.Yd)(),p=d.setBackgroundSelection,f=d.setMode,h=t===U?a:(0,g.At)(r,t);if(!p||!f)return null;var v=function(e){switch(e){case F:return"Bold (âB)";case H:return"Italic (âI)";case G:return"Link (âK)";case U:return"Formatting options";default:return"Click to format"}}(t);return c.createElement(S.G,{tooltipText:v,targetDistance:10,isVisible:!(t===U&&a)},c.createElement("span",{onMouseDown:function(e){e.preventDefault()},onClick:function(e){if(e.stopPropagation(),!n)switch(t){case"title":case"bq":return(0,g.qj)(r,t);case U:return void l(!a);default:return(0,g.wh)(r,t)}},className:s(M(n,h,u))},function(e,t,n,r,o,i){switch(e){case F:return c.createElement(D.A,null);case H:return c.createElement(j.A,null);case G:return c.createElement(L.A,null);case U:return c.createElement(_,{editor:n,buttonKeys:r,showSubMenu:t,disabled:o,setShowSubMenu:i})}}(t,h,r,i,n,l)))},V=n(52290),F="bold",H="italic",G="link",U="format",Z=function(e){var t=e.editor,n=e.disabled,r=e.showSubMenu,o=e.setShowSubMenu;return 3===e.editorDepth?c.createElement(T.kZ,{tag:"span",scale:"M"},c.createElement(B,{key:U,format:U,disabled:n,slateEditor:t,subMenuKeys:[F,H],showSubMenu:r,setShowSubMenu:o})):c.createElement(T.kZ,{tag:"span",scale:"M"},c.createElement(V.a,{display:"flex"},c.createElement(B,{key:F,format:F,disabled:n,slateEditor:t,showSubMenu:r,setShowSubMenu:o}),c.createElement(B,{key:H,format:H,disabled:n,slateEditor:t,showSubMenu:r,setShowSubMenu:o})))},q=n(78265),Q=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeInitialDeltas:!0}).includeInitialDeltas,n=[],r=e.split("\n");return t&&(n=[{type:8,index:0,section:{name:z(),startIndex:0}}]),r.forEach((function(e,t){n.push({type:1,paragraph:{markups:[],name:z(),text:e,type:1},verifySameName:!1,index:t})})),n},z=function(){return Math.round(65535*Math.random()).toString(16).padStart(4,"0")},K=n(79756),Y=n(27721),$=n(43634),W=n(7580),J=n(23393),X=n(99731),ee=n(53424),te=n(1771),ne=n(46445),re=function(e){var t=e.isVisible,n=e.hide,r=(0,Y.R)().value;return c.createElement(te.T,null,(function(e){var o=e.mutate;return c.createElement(ne.T,{confirmText:"Resend verification email",hide:n,isVisible:t,isDestructiveAction:!1,onConfirm:function(){o()},showCancelButton:!1,titleText:"Commenting requires a verified email address"},"Click below to send a new verification email to ",null==r?void 0:r.unverifiedEmail,".")}))},oe=n(39),ie=n(42976),ae=n(42600),le=n(61333);function se(){se=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,a=Object.create(o.prototype),l=new D(r||[]);return i(a,"_invoke",{value:T(e,n,l)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",m="suspendedYield",h="executing",v="completed",g={};function y(){}function E(){}function b(){}var k={};c(k,l,(function(){return this}));var x=Object.getPrototypeOf,R=x&&x(x(N([])));R&&R!==n&&r.call(R,l)&&(k=R);var O=b.prototype=y.prototype=Object.create(k);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,a,l,s){var u=p(e[i],e,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==(0,o.A)(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,s)}),(function(e){n("throw",e,l,s)})):t.resolve(d).then((function(e){c.value=e,l(c)}),(function(e){return n("throw",e,l,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function T(t,n,r){var o=f;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var s=I(l,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?v:m,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function I(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=p(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError((0,o.A)(t)+" is not iterable")}return E.prototype=b,i(O,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:E,configurable:!0}),E.displayName=c(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,u,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},w(S.prototype),c(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new S(d(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(O),c(O,u,"Generator"),c(O,l,(function(){return this})),c(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=function(){return{"& button":{border:"none"}}},pe="400ms",fe=function(e,t){var n=ce(ce({},t),{},{display:"flex"});return ce(ce({},n),{},e?{transition:"opacity ".concat(pe,", max-height ").concat(pe),opacity:1,maxHeight:"100px"}:{transition:"opacity ".concat(pe,", max-height ").concat(pe),opacity:0,maxHeight:0})},me=function(e){return{transition:"min-height ".concat(pe,", padding ").concat(pe),minHeight:e?"100px":"15px",'& [data-slate-placeholder="true"]':{top:0},padding:e?"16px":"8px 12px"}},he=function(e){var t,n,r,o=e.createdAt,l=e.isPublishingResponse,s=e.disableReplyButton,w=void 0!==s&&s,S=e.publishResponse,P=e.type,C=void 0===P?q.o.create:P,D=e.onClose,N=void 0===D?(0,a.A)(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))):D,A=e.inResponseToQuote,j=e.initialValue,L=e.placeholder,M=void 0===L?"What are your thoughts?":L,_=e.editorOpenByDefault,B=void 0!==_&&_,F=e.showEditorHeader,H=void 0===F||F,G=e.showPublishCheckbox,U=void 0!==G&&G,z=e.responseDistribution,te=void 0===z?ie.IZ.NOT_DISTRIBUTED:z,ne=e.toggleResponseDistribution,ue=e.viewerPronouns,ce=e.autofocus,he=void 0===ce||ce,ve=e.highlightGroup,ge=C===q.o.edit,ye=(0,R.l)(),Ee=(0,I.D)(),be=(0,le.n8)(navigator.userAgent),ke=C===q.o.edit,xe=(0,c.useState)(!1),Re=(0,i.A)(xe,2),Oe=Re[0],we=Re[1],Se=(0,m.Yd)(),Te=Se.value,Ie=Se.clearValue,Pe=(0,y.AO)([y.dn]),Ce=Pe.editor,De=Pe.renderLeaf,Ne=Pe.renderElement,Ae=(0,E.z)(Ce),je=null===Ce.selection,Le=(0,c.useState)(!1),Me=(0,i.A)(Le,2),_e=Me[0],Be=Me[1],Ve=(0,c.useContext)(k.a),Fe=Ve.threadDepthOnPage,He=Ve.inResponseToEntityTypename,Ge=Fe+ +!ge,Ue=(0,c.useState)(ge||B),Ze=(0,i.A)(Ue,2),qe=Ze[0],Qe=Ze[1],ze=(0,c.useState)(!0),Ke=(0,i.A)(ze,2),Ye=Ke[0],$e=Ke[1],We=(0,c.useState)(null),Je=(0,i.A)(We,2),Xe=Je[0],et=Je[1],tt=(0,c.useState)(!1),nt=(0,i.A)(tt,2),rt=nt[0],ot=nt[1],it=(0,c.useState)((t=j)?t.paragraphs.map((function(e){return e.text})).join("\n"):""),at=(0,i.A)(it,2),lt=at[0],st=at[1],ut=(0,c.useRef)(d.Node.string(Ce)),ct=(0,c.useState)(!1),dt=(0,i.A)(ct,2),pt=dt[0],ft=dt[1],mt=(0,c.useCallback)((function(){return ft(!1)}),[]),ht=(0,Y.R)().value,vt=(0,oe.Z)({name:"detail",scale:"M",color:"DARKER"}),gt=(0,c.useCallback)((function(){Be(!1),we(!1)}),[]),yt=(0,c.useCallback)((function(){Qe(!0),we(!0)}),[]),Et=(0,c.useCallback)((function(){(0,g.yF)(Ce),Be(!1)}),[]),bt=(0,c.useCallback)((function(){N().then((function(e){e.preventStateUpdate||(Qe(!1),be?st(""):(0,g.bK)(Ce),null==Ie||Ie())}))}),[N]),kt=(0,c.useCallback)((function(){return be?Q(lt,ge?{includeInitialDeltas:!1}:void 0):(0,g.Mr)(Ce,ge?{includeInitialDeltas:!1}:void 0)}),[lt,ge]);return(0,c.useEffect)((function(){A&&Qe(!0)}),[A]),(0,c.useEffect)((function(){var e=d.Node.string(Ce);$e(e.trim().length<=0);var t=kt();ot(!u()(Xe,t)),e!==ut.current&&Be(!1),ut.current=e}),[Te]),(0,c.useEffect)((function(){var e=kt();et(e)}),[j]),(0,c.useEffect)((function(){he&&qe&&!be&&(B||ke||p.rL.blur(Ce),setTimeout((function(){return p.rL.focus(Ce)}),0))}),[qe,he]),c.createElement(V.a,{marginBottom:B?"0":"20px"},H&&c.createElement(V.a,{display:"flex",alignItems:"center",marginBottom:"12px"},ht?c.createElement(J.H8,{scale:"XS",user:ht,showBadge:!0}):c.createElement(W.r,{miroId:ae._3,diameter:32,alt:""}),c.createElement(V.a,{marginLeft:"12px",display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},ht?c.createElement(V.a,{display:"flex",flexWrap:"wrap",alignItems:"baseline"},c.createElement("span",{className:ye([vt,{wordBreak:"break-word",paddingRight:"4px"}])},ht.name),ue&&c.createElement(f.U,{user:ue,scale:"S",paddingTop:"2px"})):c.createElement(T.kZ,{scale:"M"},"Write a response"),ge&&o&&c.createElement(T.kZ,{scale:"M",color:"LIGHTER"},c.createElement(b.f,{timestamp:o})))),c.createElement("div",{className:ye((n=qe,r=Oe,function(e){return{backgroundColor:r?e.colorTokens.background.neutral.tertiary.base:e.colorTokens.background.neutral.secondary.base,borderRadius:"4px",display:"flex",flexDirection:"column",paddingBottom:n?"14px":"0",transition:"background-color ".concat(pe,", padding-bottom ").concat(pe)}}))},qe&&(A?c.createElement(x.I,{quote:A}):ve?c.createElement(x.I,{quote:ve}):null),c.createElement(V.a,{display:"flex",flexDirection:"column",position:"relative"},ht?c.createElement("div",{className:ye(me(qe))},be?c.createElement(O,{onFocus:yt,responseContent:lt,setIsEmpty:$e,setResponseContent:st,isEditorOpen:qe}):c.createElement(v.j,{editor:Ce},c.createElement(h.a,{onFocus:yt,onBlur:gt,onClick:Et,renderLeaf:De,renderElement:Ne,placeholder:M,onKeyDown:Ae,autofocus:he}))):c.createElement($.r,{operation:"register",susiEntry:(0,K.gz)(He)},c.createElement(V.a,{padding:"8px 12px"},c.createElement(T.kZ,{scale:"M",color:"LIGHTER"},"What are your thoughts?"))),c.createElement("div",{className:ye(fe(qe,{justifyContent:"space-between",marginLeft:"10px",color:Ee.colorTokens.foreground.neutral.secondary.base}))},c.createElement(Z,{editor:Ce,disabled:je,showSubMenu:_e,setShowSubMenu:Be,editorDepth:Ge}),c.createElement("div",{className:ye(fe(qe,{padding:"0 14px",alignSelf:"flex-end"}))},c.createElement("div",{className:ye(de)},c.createElement(X.$n,{buttonStyle:"SUBTLE",size:"SMALL",onClick:function(){return bt()},"data-testid":"CancelResponseButton"},"Cancel")),c.createElement(X.$n,{buttonStyle:"BRAND",size:"SMALL",disabled:Ye||l||!rt||w,onClick:function(){var e=be?Q(lt,ge?{includeInitialDeltas:!1}:void 0):(0,g.Mr)(Ce,ge?{includeInitialDeltas:!1}:void 0);null!=ht&&ht.unverifiedEmail?ft(!0):S(e,bt)},"data-testid":"ResponseRespondButton"},ge?"Update":"Respond"))))),c.createElement(re,{isVisible:pt,hide:mt}),U&&c.createElement("div",{className:ye(fe(qe,{}))},c.createElement("span",{role:"checkbox","aria-checked":te===ie.IZ.DISTRIBUTED,tabIndex:0,className:ye({paddingTop:"14px"}),onMouseDown:function(e){e.preventDefault(),je||null==ne||ne()},onKeyDown:function(e){!je&&e&&"Enter"===e.key&&(null==ne||ne())}},c.createElement(ee.S,{checked:te===ie.IZ.DISTRIBUTED,textColor:"LIGHTER",textScale:"S",checkboxStyle:"OBVIOUS",marginRight:"8px",disabled:je},"Also publish to my profile"))))}},16022:(e,t,n)=>{n.d(t,{n:()=>m});var r=n(64467),o=n(96540),i=n(53259),a=n.n(i),l=n(26365),s=n(95765),u=n(78265);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={delay:1e3,timeout:2e4,loading:function(e){return e.error?o.createElement(l.z,{error:e.error}):e.timedOut?o.createElement(l.z,{error:new Error("Loadable Screen component has timed out")}):e.pastDelay?o.createElement(s.x,null):null}},f=a()(d(d({},p),{},{loader:function(){return n.e(5258).then(n.bind(n,15279))},modules:["src/components/responses/editor/ThreadedInlineResponseEditor"],webpack:function(){return[15279]},render:function(e,t){var n=e.ThreadedInlineResponseEditor;return o.createElement(n,t)}})),m=function(e){var t=e.parentEntityId,n=e.parentEntityTypename,r=e.parentVersionId,i=e.responseId,a=e.parentCreatorName,l=e.parentEntitySlug,s=e.type,c=void 0===s?u.o.create:s,d=e.initialValue,p=e.viewerPronouns,m=e.editorOpenByDefault,h=e.autofocus,v=e.scrollIntoView,g=e.showPublishCheckbox;return o.createElement(f,{parentEntitySlug:l,parentEntityId:t,parentEntityTypename:n,parentVersionId:r,parentCreatorName:a,responseId:i,type:c,initialValue:d,viewerPronouns:p,editorOpenByDefault:m,autofocus:h,scrollIntoView:v,showPublishCheckbox:g})}},11211:(e,t,n)=>{n.d(t,{U:()=>x});var r=n(96540),o=n(79756),i=n(52290),a=n(86527),l=n(49287),s=n(44402),u=n(52752),c=n(14782),d=n(80296),p=n(43389),f=n(3005),m=n(99731),h=n(56942),v=n(36557),g=function(){return{fontStyle:"italic",textAlign:"center"}},y=function(e){var t,n=e.responsesLocked,l=e.unlockResponses,u=e.lockResponses,y=(0,s.l)(),E=r.useContext(p.o).rootEntityTypename,b=r.useState(!1),k=(0,d.A)(b,2),x=k[0],R=k[1];t=!0===n?r.createElement(a.N,{onClick:l},"Open discussion"):r.createElement(a.N,{onClick:function(){return R(!0)}},"Close discussion");var O="Closing a discussion prevents responses from being added or edited",w=(0,o.bY)(E);return r.createElement(r.Fragment,null,r.createElement(c.q3,null,t),x&&r.createElement(f.l,{isVisible:x,hide:function(){return R(!1)},withCloseButton:!1,noPortal:!0,padding:50},r.createElement(i.a,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},r.createElement(h.DZ,{scale:"M"},"Close Discussion"),r.createElement(i.a,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"70px",textAlign:"center"},r.createElement(v.kZ,{scale:"M",color:"DARKER"},w?"".concat(O," on your ").concat(w,". Existing responses will remain on your ").concat(w,"."):O)),r.createElement(i.a,{display:"flex",marginBottom:"20px"},r.createElement(a.N,{onClick:function(){return R(!1)}},r.createElement(v.kZ,{scale:"M",color:"DARKER"},"Cancel")),r.createElement(i.a,{marginLeft:"25px"},r.createElement(m.$n,{buttonStyle:"ERROR",onClick:u,"data-test-id":"close-discussion-button"},"Close discussion"))),r.createElement("div",{className:y(g)},r.createElement(v.kZ,{scale:"M"},"You can reopen the discussion at any time.")))))},E={position:"absolute !important",right:"0",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:"4px",zIndex:"1000",backgroundColor:"rgba(255, 255, 255, 1)",minWidth:"200px"},b=function(e){var t=e.responsesLocked,n=e.isPopoverMenuVisible,o=e.hidePopoverMenu,i=e.lockResponses,l=e.unlockResponses,u=e.manageResponsesLink,d=(0,s.l)(),p=r.useRef(null);return r.useEffect((function(){var e=function(e){var t;null!=p&&null!==(t=p.current)&&void 0!==t&&t.contains(e.target)||o()};if(n)return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[n]),r.createElement("div",{className:d(E),ref:p},r.createElement(c.Ni,null,u&&r.createElement(c.q3,null,r.createElement(a.N,{href:u},"Manage responses")),r.createElement(y,{responsesLocked:t,hidePopoverMenu:o,lockResponses:i,unlockResponses:l})))},k=function(e){return{cursor:"pointer",border:0,fill:e.baseColor.fill.light,":hover":{fill:e.baseColor.fill.dark},":focus":{outline:"none"}}},x=function(e){var t=e.responsesLocked,n=e.infoLink,c=e.lockResponses,d=e.unlockResponses,p=e.hidePopoverMenu,f=e.isPopoverMenuVisible,m=e.handleClickOverflowDots,h=e.parentEntityTypename,v=(0,s.l)(),g="managementPopoverMenu";return r.createElement(i.a,null,r.createElement(a.N,{"aria-controls":g,"aria-expanded":f?"true":"false",onClick:m,inline:!0,className:v(k)},r.createElement(u.A,null)),f&&r.createElement("div",{id:g,className:v({position:"relative"})},r.createElement(l.Ne,{source:{susiEntry:(0,o.gz)(h)},extendSource:!0},r.createElement(b,{responsesLocked:t,isPopoverMenuVisible:f,hidePopoverMenu:p,manageResponsesLink:n,unlockResponses:d,lockResponses:c}))))}},21044:(e,t,n)=>{n.d(t,{J:()=>i});var r=n(80296),o=n(96540),i=function(){var e=o.useState(!1),t=(0,r.A)(e,2),n=t[0],i=t[1];return{handleClickOverflowDots:o.useCallback((function(e){e.nativeEvent.stopPropagation(),i(!n)}),[n]),hidePopoverMenu:o.useCallback((function(){i(!1)}),[]),isPopoverMenuVisible:n}}},69214:(e,t,n)=>{n.d(t,{G:()=>g,F:()=>v});var r=n(80296),o=n(95420),i=n(96540),a=n(83858),l=n(72130),s=n(49287),u=n(42976),c=n(91830),d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteResponseMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"responseId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletePost"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"responseId"}}}]}]}}]},p=n(22986),f=n(43389),m=n(60602),h=n(23406),v=function(){return i.createElement("div",null,"Deleted responses are gone forever.",i.createElement("br",null),"Are you sure?")},g=function(e){var t,n=e.responseDistribution,g=e.responseId,y=e.hidePopoverMenu,E=e.hide,b=n===u.IZ.DISTRIBUTED,k=b?"Delete response and story":"Delete",x=b?"This response is also a story on your profile. Are you sure you want to delete this response?":i.createElement(v,null),R=(0,l.$L)(),O=(0,s.jI)(),w=(0,c.zF)(),S=(0,i.useContext)(m.a),T=S.inResponseToEntityId,I=S.inResponseToEntityTypename,P=(0,i.useContext)(f.o).sidebarRef,C=(0,i.useContext)(h.u).highlightGroup,D=(0,o.n)(d,{variables:{responseId:g},update:function(e){if("Post"===I)(0,p.e)({cache:e,inResponseToPostId:T,responseId:g,highlightGroupId:null==C?void 0:C.id});else{if("Catalog"!==I)return;(0,p.B)(e,T,g)}R.event("responses.removed",{postId:g,source:O}),w({message:"Successfully deleted response."}),null==y||y()}}),N=(0,r.A)(D,1)[0];null!=P&&P.current&&(t=P.current.scrollTop);var A=(0,i.useCallback)((function(){null==E||E(),null!=P&&P.current&&(P.current.scrollTop=t)}),[E,t]);return i.createElement(a.d,{dialogHeading:k,dialogDescription:x,cancelDialogAction:A,confirmDialogAction:N,confirmDialogButtonText:"Delete Response",confirmButtonStyle:"ERROR",hide:E,isDialogOpen:!0})}},83858:(e,t,n)=>{n.d(t,{d:()=>d});var r=n(96540),o=n(43389),i=n(3005),a=n(52290),l=n(86527),s=n(99731),u=n(56942),c=n(36557),d=function(e){var t=e.isDialogOpen,n=e.dialogHeading,d=e.dialogDescription,p=e.cancelDialogAction,f=e.confirmDialogAction,m=e.confirmDialogButtonText,h=e.confirmButtonStyle,v=void 0===h?"STRONG":h,g=e.hide,y=r.useContext(o.o).sidebarRef,E=function(e){var t;null!=y&&null!==(t=y.current)&&void 0!==t&&t.style&&(y.current.style.overflowY=e?"hidden":"")};return r.useEffect((function(){return E(t),function(){E(!1)}}),[t]),r.createElement(i.l,{isVisible:t,hide:g,withCloseButton:!1,noPortal:!0,padding:50},r.createElement(a.a,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},r.createElement(u.DZ,{scale:"M"},n),r.createElement(a.a,{display:"flex",width:"100%",paddingRight:"5px",marginTop:"10px",marginBottom:"40px",textAlign:"center"},r.createElement(c.kZ,{scale:"M",color:"DARKER"},d)),r.createElement(a.a,{display:"flex",marginBottom:"20px"},r.createElement(l.N,{onClick:p},r.createElement(c.kZ,{scale:"M",color:"DARKER"},"Cancel")),r.createElement(a.a,{marginLeft:"25px"},r.createElement(s.$n,{buttonStyle:v,onClick:f,"data-test-id":"close-discussion-button"},m)))))}},22986:(e,t,n)=>{n.d(t,{B:()=>l,e:()=>a});var r=n(64467);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var a=function(e){var t=e.cache,n=e.inResponseToPostId,r=e.responseId,o=e.highlightGroupId;t.modify({id:"Post:".concat(n),fields:{postResponses:function(e){var t;return i(i({},e),{},{count:(null!==(t=e.count)&&void 0!==t?t:1)-1})},threadedPostResponses:function(e,t){var n=t.readField;return i(i({},e),{},{posts:((null==e?void 0:e.posts)||[]).filter((function(e){return n("id",e)!==r}))})}}}),o&&t.modify({id:t.identify({__typename:"HighlightGroup",id:o}),fields:{responseCount:function(e){return e?e-1:0},responses:function(e,t){var n=t.readField;return i(i({},e),{},{edges:((null==e?void 0:e.edges)||[]).filter((function(e){return n("id",e.node)!==r}))})}}})},l=function(e,t,n){e.modify({id:"Catalog:".concat(t),fields:{threadedCatalogResponses:function(e,t){var r=t.readField;return i(i({},e),{},{posts:((null==e?void 0:e.posts)||[]).filter((function(e){return r("id",e)!==n}))})},responsesCount:function(e){return(null!=e?e:1)-1}}})}},8381:(e,t,n)=>{var r;n.d(t,{a:()=>r}),function(e){e.SIMPLE="SIMPLE",e.STORY="STORY"}(r||(r={}))},58192:(e,t,n)=>{n.d(t,{M:()=>i,s:()=>a});var r=n(55127),o=n.n(r),i=function(e,t,n,r){var o=t.length;return o&&e?r-o:n?r-n:0},a=function(e,t){return e?"Show ".concat(t," more ").concat(o()("reply",t)):"Load more replies (".concat(t,")")}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/2527.b9f95853.chunk.js.map